#!/usr/bin/python2.6
import sys
import os

#################################################################################################

def run_script(debug_flag):
  airports = ['KABQ','PANC','KATL','KAUS','KBDL','KBHM','KBNA','KBOS','KBUF','KBUR','KBWI','KCLE','KCLT','KCVG','KDAL','KDAY','KDCA','KDEN','KDFW','KDTW','KEWR','KFLL','KGYY','PHNL','KHOU','KHPN','KIAD','KIAH','KIND','KISP','KJAX','KJFK','KLAS','KLAX','KLGA','KLGB','KMCI','KMCO','KMDW','KMEM','KMHT','KMIA','KMKE','KMSP','KMSY','KOAK','PHOG','KOMA','KONT','KORD','KOXR','KPBI','KPDX','KPHL','KPHX','KPIT','KPSP','KPVD','KRDU','KRFD','KRSW','KSAN','KSAT','KSDF','KSEA','KSFO','KSJC','TSJU','KSLC','KSMF','KSNA','KSTL','KSWF','KTEB','KTPA','KTUS','KVNY']
  years = ['2010','2011','2012','2013']
  months = ['01','02','03','04','05','06','07','08','09','10','11','12']
  for airport in airports:
    for year in years:
      for month in months:
        if month=='01': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        if (month=='02') and (year=='2012'): days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29']
        if (month=='02') and (year!='2012'): days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28']
        if month=='03': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        if month=='04': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30']
        if month=='05': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        if month=='06': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30']
        if month=='07': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        if month=='08': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        if month=='09': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30']
        if month=='10': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        if month=='11': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30']
        if month=='12': days = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
        for day in days:
          term_command = 'curl -H \'Cookie: Prefs=|SHOWMETAR:1|;\' -o ' + airport + '_' + year + '_' + month + '_' + day + '.txt \'http://www.wunderground.com/history/airport/' + airport + '/' + year + '/' + month + '/' + day + '/DailyHistory.html?req_city=NA&req_state=NA&req_statename=NA&theprefset=SHOWMETAR&theprefvalue=1&format=1\'' + '\n'
          os.system(term_command)


#################################################################################################
#################################################################################################

# Make it into a standalone script
if __name__ == '__main__':
  run_script(-1)
